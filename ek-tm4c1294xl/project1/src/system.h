/*------------------------------------------------------------------------------
SYSTEM.H


------------------------------------------------------------------------------*/

#ifndef __SYSTEM
#define __SYSTEM


// частота прерывания Timer0, Гц
#define wFREQUENCY_T0   350

// частота прерывания Timer1, Гц
#define wFREQUENCY_T1   1


// длина заголовка пакета
#define bPACKET_HEADER  8

// длина заголовка пакета при передаче данных по указателю
#define bHEADER         15


// размер входного и выходного буферов портов
#define wINBUFF_SIZE    0x0800
#define wOUTBUFF_SIZE   0x1900


// частота прерывания Timer0, Гц
#define wFREQUENCY_T0   350


// количество портов
#define bPORTS          4

// количество скоростей
#define bBAUDS          9

// количество типов четности
#define bPARITYS        5

// количество режимов портов
#define bSTREAMS        5


// размер буфера индикатора
#define bDISPLAY        16

// размер запаса для защиты буферов от переполнения
#define bMARGIN         32


// количество тарифов
#define bTARIFFS        4

// количество изломов суточного тарифного графика
#define bBREAKS         6

// количество видов тарифов в зависимости от дня недели (новый вариант задания тарифов): будни, суббота, воскресенье
#define bMODES          3

// количество праздников за год
#define bRELAXS         40

// количество изломов при задании тарифных периодов
#define bGAPS           11

// количество видов тарифов в зависимости от дня недели (старый вариант задания тарифами)
#define bTARIFFSMODES	  5


// количество записей в таблице параметров
#define wPARAMS         500

// количество параметров
#define bPARAM_BLOCK    (4*7+1)

// количество временных блоков
#define wTIMES          (uint)(10*48)


// мажорная версия прибора
#define bMAXVERSION     4

// минорная версия прибора
#define bMINVERSION     18


// количество каналов
#define bCANALS         64

// количество групп
#define bGROUPS         32

// количество типов цифровых счётчиков
#define bDEVICES        3

// максимальное количество линий учёта в цифровом счётчике
#define bCHANNELS       128


// максимальное количество виртуальных приборов СЭМ-1
#define bMAXMACHINES    (bGROUPS/6 + 1)

// количество групп в Esc-запросах виртуальных приборов СЭМ-1 (6 или 16)
#define bFRAMES         6


// минимальный год
#define bMINYEAR        15

// максимальный год
#define bMAXYEAR        99

// размер трёхминутных массивов
#define bMINUTES        40

// размер получасовых массивов
#define wHOURS          (uint)(62*48)

// размер получасовых массивов
#define wHOURS_62       (uint)(62*48)

// размер суточных массивов
#define bDAYS           14

// размер месячных массивов (обязательно 12 !)
#define bMONTHS         12

// максимальное количество дней в выключенном состоянии
#define bMAXDAYS_OFF    30


// размер телефонного номера
#define bPHONE_SIZE     13

// размер названия прибора, канала, группы
#define bNAME_SIZE      32


// максимальное количество повторов при чтении данных с цифровых счётчиков
#define bMINORREPEATS   5


// таймаут после посылки последного запроса
#define bMAXWAITQUERY   20

// максимальное время нахождения в режиме connect без активности, секунд
#define bMAXWAITONLINE  30


// пауза между посылкой нескольких запросов к одному цифровому счётчику
#define ePAUSE          0.1


// максимальная величина коррекции времени за месяц, секунд
#define wMAXCORRECT     300


#ifndef SKIP_A

// нижний порог коррекции времени для ведомого счётчика СЭТ-4ТМ, секунд
#define bMINORCORRECT_A 3

// верхний порог коррекции времени для ведомого счётчика СЭТ-4ТМ, секунд
#define bMAJORCORRECT_A 110

// верхний порог коррекции времени для ведомого счётчика СЭТ-4ТМ, секунд
#define wLIMITCORRECT_A 1800

//
#define bBLOCKS_A       10

#endif


#ifndef SKIP_B

// нижний порог коррекции времени для ведомого счётчика Меркурий-230, секунд
#define bMINORCORRECT_B 3

// верхний порог коррекции времени для ведомого счётчика Меркурий-230, секунд
#define bMAJORCORRECT_B 230

// верхний порог коррекции времени для ведомого счётчика Меркурий-230, секунд
#define wLIMITCORRECT_B 1800

//
#define bBLOCKS_B       20

#endif


#endif
